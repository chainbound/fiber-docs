"use strict";(self.webpackChunkfiber_website=self.webpackChunkfiber_website||[]).push([[671],{9881:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={sidebar_position:1,title:"Introduction"},i="Fiber Network",l={unversionedId:"intro",id:"intro",title:"Introduction",description:"| Current Version | v0.0.3-alpha |",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/website/docs/intro",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Introduction"},sidebar:"tutorialSidebar"},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Concepts",id:"concepts",level:2},{value:"Fiber Nodes",id:"fiber-nodes",level:3},{value:"Fiber Network",id:"fiber-network-1",level:3},{value:"Indexing",id:"indexing",level:3},{value:"Usage",id:"usage",level:2},{value:"FAQ",id:"faq",level:2},{value:"Benchmarks",id:"benchmarks",level:2},{value:"Transactions",id:"transactions",level:3},{value:"Blocks",id:"blocks",level:3},{value:"Footnotes",id:"footnotes",level:2}],d={toc:p};function c(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"fiber-network"},"Fiber Network"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Current Version"),(0,r.kt)("th",{parentName:"tr",align:null},"v0.0.3-alpha")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\ud83d\udca1 Looking for alpha testers! Please contact me on Discord ",(0,r.kt)("strong",{parentName:"p"},"@mempirate | Chainbound#8926"),", or on Twitter ",(0,r.kt)("a",{parentName:"p",href:"https://twitter.com/mempirate"},"@mempirate"),"."),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"The testing phase is currently in progress, you can still participate!")),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("img",{alt:"Screenshot 2022-09-14 at 08.36.43.png",src:a(9237).Z,width:"2770",height:"1268"}))),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Fiber Network is a global network of sentries that connect to the Ethereum p2p networking layer. These sentries (Fiber Nodes) are connected to each other with a high-speed connection, allowing them to quickly send Ethereum messages from one part of the world to the other. This can be leveraged into a global and almost real-time overview of new transactions and blocks, like ",(0,r.kt)("a",{parentName:"p",href:"https://bloxroute.com/"},"Bloxroute")," and their BDN."),(0,r.kt)("h2",{id:"concepts"},"Concepts"),(0,r.kt)("h3",{id:"fiber-nodes"},"Fiber Nodes"),(0,r.kt)("p",null,"Fiber Nodes (FN) are the individual nodes that make up the Fiber Network. They essentially consist of 2 interfaces: an interface for communication with the Ethereum network (",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/devp2p"},"devp2p")," implementation), and an interface for sharing messages internally over the Fibernet (custom ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/pubsub/docs/overview"},"pubsub")," implementation with ",(0,r.kt)("a",{parentName:"p",href:"https://grpc.io/"},"gRPC"),")."),(0,r.kt)("p",null,"Each of the nodes is a very lightweight implementation that is just the Ethereum p2p stack without a state database or EVM, ",(0,r.kt)("strong",{parentName:"p"},"making it possible to deploy a large swarm of them across regions, countries and datacenters (cloud providers), at relatively low cost"),". This is part of where the opportunity sits."),(0,r.kt)("p",null,"Each node can connect to a considerable amount of peers (depending on the resources of the underlying machine / container), ensuring great visibility of new transactions (\u201dmempool\u201d) and newly produced blocks."),(0,r.kt)("h3",{id:"fiber-network-1"},"Fiber Network"),(0,r.kt)("p",null,"The crucial part to understand here is that the nodes are connected as a mesh network over specialized, high-speed links, and Ethereum messages are efficiently binary encoded for maximum speed. This ensures that when an Ethereum message (transaction or block) enters the Fibernet through ",(0,r.kt)("strong",{parentName:"p"},"node A in Virginia"),", and needs to get to ",(0,r.kt)("strong",{parentName:"p"},"node B in Frankfurt")," (for getting to the block producer for example), the link between these 2 nodes will be the best possible path for getting there. ","[1]"),(0,r.kt)("h3",{id:"indexing"},"Indexing"),(0,r.kt)("p",null,"Every transaction and every block that\u2019s seen on a node gets sent to a central indexing service along with the following properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Metadata about the Fiber Node (location)"),(0,r.kt)("li",{parentName:"ul"},"Timestamp"),(0,r.kt)("li",{parentName:"ul"},"What node the block / transaction came from (either a devp2p peer or another FN)")),(0,r.kt)("p",null,"All this information can be used for things like ",(0,r.kt)("strong",{parentName:"p"},"optimizing the p2p layer, tracing blocks and transactions, measuring latency, etc.")),(0,r.kt)("p",null,"We are planning on building a service that let\u2019s you trace blocks and transactions through the p2p network."),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"Users will be able to connect to the closest node nearby over a gRPC API. We offer the following client packages to make this connection process as easy as possible:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Programming Language"),(0,r.kt)("th",{parentName:"tr",align:null},"Package"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"JavaScript / TypeScript"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/chainbound/fiber-ts"},"fiber-ts"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Golang"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/chainbound/fiber-go"},"fiber-go"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Python"),(0,r.kt)("td",{parentName:"tr",align:null},"fiber-py (WIP)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Rust"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/chainbound/fiber-rs"},"fiber-rs"))))),(0,r.kt)("p",null,"If you want to build your own client (or help with the WIP implementations), all you need are the protobuf / gRPC files and a compiler for your language. Documentation for different gRPC language implementations can be found at ",(0,r.kt)("a",{parentName:"p",href:"https://grpc.io/docs/languages/"},"https://grpc.io/docs/languages"),". The Fiber protobuf definitions are at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/chainbound/fiber-proto"},"https://github.com/chainbound/fiber-proto"),". For examples of how to actually use it (API authentication), please refer to the already implemented packages."),(0,r.kt)("p",null,"The API consists of 4 general methods:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"subscribeNewTxs"),": endpoint for opening a subscription to any new transaction that the node receives, either from the Fibernet or the devp2p network. These transactions are immediately sent to the subscription, which means they have not been verified. This is to provide the fastest possible delivery."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"subscribeNewBlocks"),": same as above but for newly mined blocks."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sendTransaction"),": endpoint for sending transactions to be propagated across the network."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sendRawTransaction"),": endpoint for sending a raw RLP encoded transaction. This is useful when you\u2019re using libraries like ",(0,r.kt)("strong",{parentName:"li"},"ethers")," or ",(0,r.kt)("strong",{parentName:"li"},"web3")," with JavaScript."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"backrunTransaction"),": endpoint for sending pairs of transactions to be propagated across the network, to ensure that they arrive at the block producer in the correct order. You can think of this as less reliable Flashbots bundles, just by making use of the p2p layer."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rawBackrunTransaction"),": same as above but for RLP encoded signed transactions.")),(0,r.kt)("h2",{id:"faq"},"FAQ"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("em",{parentName:"p"},"Do I need a blockchain node to use Fiber Network?")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"\u21d2 No. You can connect to the API without needing a blockchain node."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("em",{parentName:"p"},"Can I connect using Websockets?")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"\u21d2 No, for now the only way to connect is using one of the above client packages. The reason is that gRPC streams are a little bit faster, but we\u2019re planning to implement Websocket support soon."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("em",{parentName:"p"},"Is Fiber Network faster than Bloxroute?")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"\u21d2 See benchmarks section below. We also did a small number of backrunning challenges, and Fiber was faster 4 out of 5 times. For blocks, Bloxroute is still faster (though not always), presumably because of direct connections and their block compression techniques.")))),(0,r.kt)("h2",{id:"benchmarks"},"Benchmarks"),(0,r.kt)("p",null,"Benchmarks are against the Bloxroute Enterprise plan."),(0,r.kt)("h3",{id:"transactions"},"Transactions"),(0,r.kt)("p",null,"For 50000 transactions, we get the following results (outliers filtered):"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Consumer: EU West (AMS)"),(0,r.kt)("th",{parentName:"tr",align:null},"Seen first"),(0,r.kt)("th",{parentName:"tr",align:null},"Mean"),(0,r.kt)("th",{parentName:"tr",align:null},"Median"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Fiber Network (15 nodes)"),(0,r.kt)("td",{parentName:"tr",align:null},"74.91%"),(0,r.kt)("td",{parentName:"tr",align:null},"22ms"),(0,r.kt)("td",{parentName:"tr",align:null},"14ms")))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Consumer: US East (VINT HILL)"),(0,r.kt)("th",{parentName:"tr",align:null},"Seen first"),(0,r.kt)("th",{parentName:"tr",align:null},"Mean"),(0,r.kt)("th",{parentName:"tr",align:null},"Median"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Fiber Network (15 nodes)"),(0,r.kt)("td",{parentName:"tr",align:null},"92.79%"),(0,r.kt)("td",{parentName:"tr",align:null},"57ms"),(0,r.kt)("td",{parentName:"tr",align:null},"56ms")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Sources")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{target:"_blank",href:a(694).Z},"blxr_benchmark_ams.csv"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{target:"_blank",href:a(4346).Z},"blxr_benchmark_us_east.csv")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Network Topology")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"21_09_setup.png",src:a(9237).Z,width:"2770",height:"1268"})),(0,r.kt)("h3",{id:"blocks"},"Blocks"),(0,r.kt)("p",null,"WIP \ud83c\udfd7\ufe0f"),(0,r.kt)("p",null,"Since the merge, block propagation has moved to a different p2p network (libp2p consensus layer network). This will be implemented in the future."),(0,r.kt)("h2",{id:"footnotes"},"Footnotes"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"It is possible that the direct link between these 2 nodes is down / flaky, but because all Fiber Nodes relay all newly seen transactions, a third node (say in London) will relay the transaction itself, with only a tiny latency increase.")))}c.isMDXComponent=!0},694:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/blxr_benchmark_ams-0b9b3d8bad3323df8b8aac724f6ba0bc.csv"},4346:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/blxr_benchmark_us_east-57f1a126d6a8cffc7e4bbddab52750cb.csv"},9237:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/21_09_setup-9596090611f7be8d4369edd73deda7b9.png"}}]);