"use strict";(self.webpackChunkfiber_website=self.webpackChunkfiber_website||[]).push([[778],{3905:(e,a,n)=>{n.d(a,{Zo:()=>f,kt:()=>l});var t=n(7294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function c(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b=t.createContext({}),d=function(e){var a=t.useContext(b),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},f=function(e){var a=d(e.components);return t.createElement(b.Provider,{value:a},e.children)},s={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},p=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,o=e.originalType,b=e.parentName,f=c(e,["components","mdxType","originalType","parentName"]),p=d(n),l=r,u=p["".concat(b,".").concat(l)]||p[l]||s[l]||o;return n?t.createElement(u,i(i({ref:a},f),{},{components:n})):t.createElement(u,i({ref:a},f))}));function l(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=p;var c={};for(var b in a)hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var d=2;d<o;d++)i[d]=n[d];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}p.displayName="MDXCreateElement"},9213:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>b,contentTitle:()=>i,default:()=>s,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var t=n(7462),r=(n(7294),n(3905));const o={sidebar_position:5,title:"Tracing"},i=void 0,c={unversionedId:"usage/tracing",id:"usage/tracing",title:"Tracing",description:"Usage",source:"@site/docs/usage/tracing.md",sourceDirName:"usage",slug:"/usage/tracing",permalink:"/docs/usage/tracing",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usage/tracing.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Tracing"},sidebar:"tutorialSidebar",previous:{title:"Streams",permalink:"/docs/usage/streams"},next:{title:"Mempool Injector",permalink:"/docs/usage/fiber-inject"}},b={},d=[{value:"Usage",id:"usage",level:3},{value:"Transaction Tracing",id:"transaction-tracing",level:3},{value:"Block Tracing",id:"block-tracing",level:3}],f={toc:d};function s(e){let{components:a,...n}=e;return(0,r.kt)("wrapper",(0,t.Z)({},f,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h3",{id:"usage"},"Usage"),(0,r.kt)("p",null,"First, set up ",(0,r.kt)("inlineCode",{parentName:"p"},"cbctl")," by following the instructions ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/chainbound/cbctl#readme"},"here"),"."),(0,r.kt)("p",null,"Then, you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"fiber trace")," subcommand to trace messages:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"NAME:\n   cbctl fiber trace - Trace transactions or blocks\n\nUSAGE:\n   cbctl fiber trace command [command options] [arguments...]\n\nCOMMANDS:\n   tx       Trace a transaction\n   block    Trace a block\n   help, h  Shows a list of commands or help for one command\n\nOPTIONS:\n   --help, -h  show help\n")),(0,r.kt)("h3",{id:"transaction-tracing"},"Transaction Tracing"),(0,r.kt)("p",null,"Tracing can be very useful for seeing where certain transactions originated as well as how fast they propagated. Fiber has\nan API that will show you the exact path a transaction took through the network. You can use our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/chainbound/cbctl"},(0,r.kt)("inlineCode",{parentName:"a"},"cbctl"))," CLI tool to access the API."),(0,r.kt)("p",null,"To clarify, this is how you would trace a transaction with ",(0,r.kt)("inlineCode",{parentName:"p"},"cbctl"),":"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Command")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cbctl fiber trace tx --hash 0xaa04f9b21ad55393eac0343e4c162be56cdc54f15f7abc59dfecca347635ec9f --show-source\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Output")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Timestamp       Node ID                 Region                  Observation Type        Source\n[1683552246359] fiber-node-tzqfmUHX     (eu-central-1)          p2p                     enode://0xc4702653ad608e49f36a292e87d4299e34c69ee5a8d79c1f06c5e76a2941e682ca25b974e97b5165d3ce164c37098819fe9821a3c01fe8c0adc4cc697d7e0cda@144.76.79.170:30303\n[1683552246359] fiber-node-UBUhZvC3     (eu-central-1)          fiber                   fiber-node-tzqfmUHX-eu-central-1\n[1683552246361] fiber-node-UBUhZvC3     (eu-central-1)          p2p                     enode://0xa039a887e07e8899c308b94bc77c9d6a8c3fa589a0191646bb6a5f42c471bad9f8ea545d3a8d2f3ff03a9c7edb6c0f056dac2d485064a948bbac50742df5da0b@3.68.227.119:30303\n[1683552246364] fiber-node-1FNltdeP     (eu-west-3)             fiber                   fiber-node-tzqfmUHX-eu-central-1\n[1683552246368] fiber-node-uy91LhSB     (eu-west-2)             fiber                   fiber-node-UBUhZvC3-eu-central-1\n[1683552246375] fiber-node-1FNltdeP     (eu-west-3)             p2p                     enode://0x9a6808b872cdef7d153aaf26e4447f27499b367f44121068d36d38e4829e336df2a32acf9088ba1a07952016abeea92e58368338b73406a178e751c56335b5b5@81.249.172.138:30403\n[1683552246376] fiber-node-uy91LhSB     (eu-west-2)             p2p                     enode://0xbcfb491c00fd1a6577311cf96c40165c1e70450968a10f920bc8900f1d6042db0dc6555064333ec153cc147a9d665d410f905383aa1b022d6e4878139e85c858@13.36.234.254:30303\n[1683552246401] fiber-node-uxXKJltD     (us-east-1)             p2p                     enode://0x11dfc468e1370365058f8024e371b9fdd9fc8b7d7666f14912d8354e2d1e98c1bcb570028fabe9e3a5755df500fe933b58dc41390e0c42bd5b5efbbd2e9f2af8@138.201.137.117:30303\n[1683552246401] fiber-node-vKZvH7Va     (us-east-1)             fiber                   fiber-node-uxXKJltD-us-east-1\n[1683552246401] fiber-node-RrDUEn2O     (us-east-1)             fiber                   fiber-node-uxXKJltD-us-east-1\n[1683552246406] fiber-node-RrDUEn2O     (us-east-1)             p2p                     enode://0xf0177460cedeb39a9e9791e1b93ee510467e9b75052ab4ff6bdbdf273d6c7a1d6db010a39032974f90798415ca284bc400182eef119dbc1b83da2a103478b171@34.229.169.228:30303\n[1683552246406] fiber-node-vKZvH7Va     (us-east-1)             p2p                     enode://0x49def938197d138fccdfd15250e27fa2b423f7ecf560ef9c826a16f8558f9d062b88648e92578ce7e81558ce53832ffd87efe0ae42d191858bbc42f11e70af85@18.234.75.196:30303\n[1683552246406] fiber-node-bp1hdWL3     (us-east-2)             fiber                   fiber-node-uxXKJltD-us-east-1\n[1683552246412] fiber-node-bp1hdWL3     (us-east-2)             p2p                     enode://0x919da281398a13e227b26c21b1747e7d28acf3270eb2a707787961608e21d0e4206b1806b04029eec0a75933a08ad730359184e6005dc4245b6c2116a1da57d6@44.201.98.188:30303\n[1683552246432] fiber-node-rvrbVEEN     (us-west-1)             fiber                   fiber-node-uxXKJltD-us-east-1\n[1683552246437] fiber-node-pjjlW9ba     (ap-southeast-1)        fiber                   fiber-node-UBUhZvC3-eu-central-1\n[1683552246439] fiber-node-rvrbVEEN     (us-west-1)             p2p                     enode://0xf8c1c390d373c7d439dbee739213b3529067997b97b8249ba550e8348ad9affafa133c784e40e81aaec535bf88beaebf4f2285561ff7d333282b23b4c9ce2d93@185.171.131.117:30303\n[1683552246441] fiber-node-pjjlW9ba     (ap-southeast-1)        p2p                     enode://0x2976502fd13cc604da9775ae332ed45c13708d5c04677d311085be717a7162ebd7fdfa5659d48b047f38f106810f3293f7beac9649decb74256e65d336da8dce@18.141.166.63:29888\n[1683552246448] fiber-node-yJuuNX1O     (ap-northeast-1)        p2p                     enode://0x1ef5d1c8ea44928c284a2e850647428773d0f2ba02343795dec93f76dedd73949d516e7580666bc1809782ee0acc51e39f8de90520baca31b164840e0cebda99@52.193.254.254:44881\n[1683552246456] fiber-node-YboaGO5a     (ap-east-1)             fiber                   fiber-node-tzqfmUHX-eu-central-1\n[1683552246462] fiber-node-YboaGO5a     (ap-east-1)             p2p                     enode://0xf149cf0fb44e5c493e5f7cd7d2b4841a9faa817d034c1d5394527b8105a296a1ba7e15823b60469dd304f5e50f535076a311a1f29b422ca4407ac45f22bd2049@78.46.174.84:30303\n[1683552246463] fiber-node-hz71Y1Ml     (ap-northeast-2)        p2p                     enode://0x451229d9f219fe1660b8a6959d13a0bbfbed25427a99caa4b5f45a6076e620ad1fa396525be0b643bff974b3762e997864808be9b7b4d9f443b595e290f5273c@3.36.101.198:40216\n")),(0,r.kt)("p",null,"The output is a table of observations with 5 columns:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Timestamp"),": the UNIX timestamp in milliseconds."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NodeID"),": the unique ID of the Fiber Node in question."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Region"),": the regions of said Fiber Node."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Observation Type"),": the type of observation. It can be either ",(0,r.kt)("inlineCode",{parentName:"li"},"p2p")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"fiber"),".",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"p2p"),": the observation was from a peer in the p2p network."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fiber"),": the observation was from another node in the Fiber Network."),(0,r.kt)("li",{parentName:"ul"},"We include both types of observations because it can be useful to compare the 2. You can filter by observation type by using the ",(0,r.kt)("inlineCode",{parentName:"li"},"--type")," flag."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Source"),": if received from the p2p network, an enode, otherwise the NodeID of the node we received it from.")),(0,r.kt)("h3",{id:"block-tracing"},"Block Tracing"),(0,r.kt)("p",null,"Similarly, you can also trace blocks with ",(0,r.kt)("inlineCode",{parentName:"p"},"cbctl")," using either an execution block hash or number:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cbctl fiber trace block --hash <block_hash>\n# or\ncbctl fiber trace block --number <block_number>\n")),(0,r.kt)("p",null,"For example:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Command"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cbctl fiber trace block --number 17769274\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Output"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Timestamp   Node ID         Region          Observation Type\n[1690277953069] fiber-node-WZfpDrEh (us-east-1)     p2p\n[1690277953076] fiber-node-sRjq9ckr (us-east-1)     fiber\n[1690277953076] fiber-node-q5MFsXcd (us-east-1)     fiber\n[1690277953082] fiber-node-EEMW2afd (us-east-2)     fiber\n[1690277953107] fiber-node-gSwmEiFj (us-west-1)     fiber\n[1690277953114] fiber-node-Kyu2snsE (eu-west-2)     fiber\n[1690277953118] fiber-node-EBafacey (eu-west-3)     fiber\n[1690277953122] fiber-node-4WUOdGw3 (eu-central-1)      fiber\n[1690277953122] fiber-node-fJsb66hv (eu-central-1)      fiber\n[1690277953144] fiber-node-q5MFsXcd (us-east-1)     p2p\n[1690277953150] fiber-node-yKhHJsyo (ap-northeast-1)        fiber\n[1690277953151] fiber-node-Er6JELxH (ap-northeast-1)        fiber\n[1690277953163] fiber-node-hZ4K3q7A (ap-northeast-2)        fiber\n[1690277953176] fiber-node-LkP2dHge (ap-east-1)     fiber\n[1690277953184] fiber-node-JVIFxwE0 (ap-southeast-1)        fiber\n[1690277953185] fiber-node-qCD5QJB2 (ap-southeast-1)        fiber\n[1690277953219] fiber-node-sRjq9ckr (us-east-1)     p2p\n[1690277953359] fiber-node-Kyu2snsE (eu-west-2)     p2p\n[1690277953366] fiber-node-EEMW2afd (us-east-2)     p2p\n[1690277953392] fiber-node-qCD5QJB2 (ap-southeast-1)        p2p\n[1690277953461] fiber-node-4WUOdGw3 (eu-central-1)      p2p\n[1690277953479] fiber-node-fJsb66hv (eu-central-1)      p2p\n[1690277953580] fiber-node-EBafacey (eu-west-3)     p2p\n[1690277953639] fiber-node-yKhHJsyo (ap-northeast-1)        p2p\n[1690277953669] fiber-node-Er6JELxH (ap-northeast-1)        p2p\n[1690277953674] fiber-node-gSwmEiFj (us-west-1)     p2p\n[1690277953841] fiber-node-LkP2dHge (ap-east-1)     p2p\n[1690277954136] fiber-node-JVIFxwE0 (ap-southeast-1)        p2p\n[1690277954152] fiber-node-hZ4K3q7A (ap-northeast-2)        p2p\n")))}s.isMDXComponent=!0}}]);